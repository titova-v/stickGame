window.__require=function t(e,n,i){function r(c,a){if(!n[c]){if(!e[c]){var s=c.split("/");if(s=s[s.length-1],!e[s]){var h="function"==typeof __require&&__require;if(!a&&h)return h(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+c+"'")}c=s}var l=n[c]={exports:{}};e[c][0].call(l.exports,function(t){return r(e[c][1][t]||t)},l,l.exports,t,e,n,i)}return n[c].exports}for(var o="function"==typeof __require&&__require,c=0;c<i.length;c++)r(i[c]);return r}({GameController:[function(t,e){"use strict";cc._RF.push(e,"54a44b4Wp1COJUEv6YTBurP","GameController"),cc.Class({extends:cc.Component,properties:{playerNode:cc.Node,scoreView:cc.Label,linePrefab:cc.Prefab,platformPrefab:cc.Prefab,bonusPrefab:cc.Prefab},onLoad:function(){this.node.on(cc.Node.EventType.MOUSE_DOWN,this.startDrawingLine,this),this.node.on(cc.Node.EventType.MOUSE_UP,this.stopDrawingLine,this),this.createPlatform(),this.createNewSetup(),this.score=0,this.player=this.playerNode.getComponent("PlayerController")},start:function(){},update:function(){this.drawing&&this.drawLine(this.lineLength+=4)},lock:function(){this.enabled=!1},unlock:function(){this.enabled=!0},reset:function(){this.waitForUnlock=!1,this.activeLine=null},restartGame:function(){cc.game.restart()},expandScene:function(){var t=this.currentPlatform.x+.5*this.currentPlatform.width;this.node.width+=2*t},goToNextSetup:function(){this.expandScene(),this.reset(),this.createNewSetup()},createNewSetup:function(){var t=104*Math.random()+24,e=96*Math.random()+32+(this.currentPlatform?this.currentPlatform.x+.5*this.currentPlatform.width:0)+.5*t;this.createPlatform(t,e)},incrementScore:function(){this.score++,this.updateScoreView()},updateScoreView:function(){this.scoreView.string=this.score.toString()},startDrawingLine:function(t){t.stopPropagation(),this.drawing||this.waitForUnlock||(this.unlock(),this.lineLength=0,this.drawing=!0,this.createLine())},stopDrawingLine:function(t){this.drawing&&(t.stopPropagation(),this.drawing=!1,this.lock(),this.moveLine())},moveLine:function(){var t=this;this.waitForUnlock=!0,cc.tween(this.activeLine).to(.3,{angle:-90}).call(function(){return t.checkIndicator()}).call(function(){return t.movePlayer()}).start()},movePlayer:function(){var t=this.activeLine.height+this.activeLine.x;t>this.currentPlatform.x-.5*this.currentPlatform.width&&t<this.currentPlatform.x+.5*this.currentPlatform.width?this.moveTruePath():this.moveFailPath()},moveTruePath:function(){var t=this;cc.tween(this.node).call(function(){Promise.all([t.player.moveToPosition(t.currentPlatform.x+.5*t.currentPlatform.width)]).then(t.moveScene.bind(t)).then(function(){t.incrementScore(),t.goToNextSetup()})}).start()},moveFailPath:function(){var t=this;this.playerNode.zIndex=10,this.node.sortAllChildren(),cc.tween(this.node).call(function(){Promise.all([t.player.moveToPosition(t.activeLine.x+t.activeLine.height+40)]).then(t.player.fall.bind(t.player)).then(function(){return t.restartGame()})}).start()},moveScene:function(){var t=this,e=-50-this.currentPlatform.x-.5*this.currentPlatform.width;return new Promise(function(n){cc.tween(t.node).to(.6,{position:cc.v2(e,0)}).call(n).start()})},createLine:function(){var t=cc.instantiate(this.linePrefab);t.x=this.playerNode.x,this.node.addChild(t),this.activeLine=t},createPlatform:function(t,e){void 0===t&&(t=300),void 0===e&&(e=-200);var n=cc.instantiate(this.platformPrefab);n.width=t,n.x=e,this.node.addChild(n),this.currentPlatform=n},drawLine:function(t){void 0===t&&(t=0),this.activeLine.height=t},checkIndicator:function(){var t=this.activeLine.height+this.activeLine.x;t>=this.currentPlatform.x-3&&t<=this.currentPlatform.x+3&&this.flyBonus()},flyBonus:function(){var t=this,e=cc.instantiate(this.bonusPrefab);e.x=this.currentPlatform.x+this.currentPlatform.parent.x,e.y=this.currentPlatform.y+12-this.currentPlatform.parent.y-this.scoreView.node.y,this.node.addChild(e),e.setParent(this.scoreView.node),cc.tween(e).to(.4,{position:cc.v2(0,-32)}).hide().call(function(){return t.incrementScore()}).start()}}),cc._RF.pop()},{}],PlayerController:[function(t,e){"use strict";cc._RF.push(e,"f4085WHAsFKVL4maJFUN3Iy","PlayerController"),cc.Class({extends:cc.Component,properties:{},lock:function(){this.enabled=!1},unlock:function(){this.enabled=!0},moveToPosition:function(t){var e=this,n=t-this.node.x;return new Promise(function(i){cc.tween(e.node).to(n/500*3,{position:cc.v2(t,0)}).call(i).start()})},fall:function(){var t=this;return new Promise(function(e){cc.tween(t.node).to(1,{easing:"outSine",position:cc.v2(t.node.x+12,t.node.y-600)}).call(e).start()})},onLoad:function(){this.lock()}}),cc._RF.pop()},{}]},{},["GameController","PlayerController"]);